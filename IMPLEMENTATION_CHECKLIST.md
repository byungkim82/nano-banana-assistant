# 나노 바나나 프롬프트 어시스턴트 - 구현 체크리스트

> 최종 업데이트: 2025-12-23
> 현재 상태: **Phase 5 완료 (4.4 마킹 에디터 제외)**

---

## 📊 전체 진행 현황

| Phase | 이름 | 상태 | 진행률 |
|-------|------|------|--------|
| Phase 1 | 핵심 MVP | ✅ 완료 | 100% |
| Phase 2 | 이미지 관리 & 번역 | ✅ 완료 | 100% |
| Phase 3 | 대화식 편집 & Thinking 모드 | ✅ 완료 | 100% |
| Phase 4 | 고급 기능 | ✅ 완료 | 80% (4.4 제외) |
| Phase 5 | 폴리싱 | ✅ 완료 | 100% |

---

## ✅ Phase 1: 핵심 MVP (완료)

### 1.1 HTML 기본 구조 및 CSS
- [x] DOCTYPE 및 meta 태그
- [x] CSS 변수 시스템
  - [x] 색상 변수 (Primary: #FFE135, Secondary: #2D3436, Accent: #6C5CE7)
  - [x] 타이포그래피 변수 (font-size-xs ~ font-size-2xl)
  - [x] 스페이싱 변수 (spacing-xs ~ spacing-xl)
  - [x] Border radius 변수
  - [x] Shadow 변수
- [x] 2열 레이아웃 (빌더 | 결과)
- [x] 컴포넌트 스타일
  - [x] 버튼 (btn-primary, btn-secondary, btn-outline, btn-accent)
  - [x] 폼 요소 (input, textarea, select, checkbox)
  - [x] 패널 (panel, panel-header, panel-body)
  - [x] 모달 (modal-overlay, modal, modal-header, modal-body, modal-footer)
- [x] 반응형 기초 (1024px, 768px 브레이크포인트)

### 1.2 상태 관리 & 설정
- [x] 전역 상태 객체 (state)
  - [x] apiKey
  - [x] apiStatus
  - [x] currentTemplate
  - [x] fieldValues (템플릿별)
  - [x] generatedImage
  - [x] isLoading
  - [x] error
- [x] LocalStorage 저장/불러오기
  - [x] API 키 저장 (nano_banana_api_key)
  - [x] 앱 시작 시 자동 로드

### 1.3 API 키 관리
- [x] API 키 입력 UI (password 타입)
- [x] 보기/숨기기 토글 버튼
- [x] 연결 테스트 버튼
- [x] 저장 버튼
- [x] 상태 표시 (연결됨/미연결/테스트 중)
- [x] API 키 발급 가이드 링크

### 1.4 템플릿 시스템 (6개)
- [x] 템플릿 데이터 구조 정의
- [x] 템플릿 탭 UI
- [x] 템플릿 전환 기능
- [x] 구현된 템플릿:
  - [x] `basic` - 기본 프롬프트 (6요소 공식)
  - [x] `photo` - 포토리얼리스틱
  - [x] `typography` - 타이포그래피
  - [x] `logoGrid` - 8개 로고 그리드
  - [x] `chiaroscuro` - 명암법
  - [x] `productLifestyle` - 제품 라이프스타일

### 1.5 프롬프트 빌더
- [x] 동적 폼 필드 렌더링
  - [x] text 타입
  - [x] textarea 타입
  - [x] select 타입
  - [x] checkbox 타입
  - [x] checkbox-group 타입
- [x] 필드 라벨 및 필수 표시 (*)
- [x] 도움말 텍스트 (helpText)
- [x] placeholder 지원
- [x] 실시간 프롬프트 미리보기
- [x] 프롬프트 템플릿 치환 로직
- [x] 클립보드 복사 기능
- [x] 폼 초기화 기능

### 1.6 이미지 생성 API 연동
- [x] Gemini API 호출 모듈
  - [x] 텍스트 생성 엔드포인트 (API 키 테스트용)
  - [x] 이미지 생성 엔드포인트 (gemini-2.0-flash-exp)
- [x] 응답에서 이미지 추출 (base64)
- [x] 로딩 상태 표시 (스피너)
- [x] 결과 이미지 표시
- [x] 이미지 다운로드 (PNG)

### 1.7 에러 처리
- [x] API 에러 메시지 매핑 (400, 401, 403, 429, 500)
- [x] 네트워크 에러 처리
- [x] 에러 메시지 UI 표시
- [x] 에러 메시지 숨김 기능

### 1.8 기본 UX
- [x] 모달 외부 클릭 시 닫기
- [x] ESC 키로 모달 닫기
- [x] 버튼 비활성화 상태 (로딩 중)
- [x] 복사 성공 피드백 (체크 아이콘)

---

## ✅ Phase 2: 이미지 관리 & 번역 (완료)

### 2.1 작업 모드 시스템
- [x] 작업 모드 UI (3가지 버튼)
  - [x] 🔍 탐색 모드 (512px, 60% 품질)
  - [x] ✨ 정제 모드 (1024px, 80% 품질)
  - [x] 📸 최종 모드 (원본 유지)
- [x] 모드별 이미지 리사이즈 로직
- [x] 현재 선택된 모드 표시
- [x] 모드 전환 시 상태 업데이트

### 2.2 이미지 업로드
- [x] 드래그 앤 드롭 업로드 영역
- [x] 클릭하여 파일 선택
- [x] 다중 이미지 지원 (최대 14개)
- [x] 이미지 유효성 검사 (파일 형식, 크기)
- [x] base64 변환
- [x] Canvas API를 이용한 리사이즈/압축
- [x] 썸네일 그리드 표시
- [x] 이미지 선택/삭제 기능
- [x] 이미지 순서 변경 (드래그)
- [x] 압축 전/후 용량 표시
- [x] 선택된 이미지 미리보기 (큰 이미지)

### 2.3 첨부 이미지 패널 (왼쪽)
- [x] 패널 레이아웃 (3열 → 첨부 | 빌더 | 결과)
- [x] 이미지 업로드 영역
- [x] 썸네일 그리드
- [x] 선택된 이미지 상세 정보
  - [x] 파일명
  - [x] 원본 크기 → 압축 크기
  - [x] 용량 정보
- [x] 삭제 버튼
- [x] 원본 보기 버튼

### 2.4 결과 이미지 갤러리
- [x] 생성 히스토리 저장
- [x] 히스토리 썸네일 그리드
- [x] 각 이미지에 사용된 프롬프트 저장/표시
- [x] 이미지 선택 시 확대 표시
- [x] "재편집" 버튼 (프롬프트 복원)
- [x] 히스토리 LocalStorage 저장

### 2.5 이미지 확대 모달
- [x] 전체 화면 이미지 표시
- [x] 이전/다음 네비게이션
- [x] 다운로드 버튼
- [x] 재편집 버튼
- [x] 닫기 버튼 (X, 외부 클릭, ESC)

### 2.6 번역 모듈
- [x] 한글→영어 자동 번역 함수
  - [x] Gemini Flash API 호출
  - [x] 번역 전용 프롬프트
- [x] 번역 토글 체크박스 UI
- [x] 원본/번역 탭 전환 표시
- [x] 번역 로딩 상태 표시
- [x] 번역 실패 시 원본 사용

### 2.7 API 연동 확장
- [x] 이미지 첨부 API 호출
  - [x] inline_data 형식으로 이미지 전송
  - [x] 다중 이미지 배열 처리
- [x] 응답에서 텍스트+이미지 동시 처리

---

## ✅ Phase 3: 대화식 편집 & Thinking 모드 (완료)

### 3.1 대화식 편집 워크플로우
- [x] 편집 세션 상태 관리
  - [x] sessionId
  - [x] basePrompt
  - [x] editHistory 배열
  - [x] currentEditIndex
- [x] 편집 히스토리 UI
  - [x] 단계별 목록 표시
  - [x] 각 단계 상태 (적용됨/현재/대기)
  - [x] 단계 클릭 시 해당 이미지로 이동
- [x] "이전 결과 기반으로 수정" 기능
- [x] 수정 요청 입력 필드
- [x] 새 세션 시작 버튼

### 3.2 빠른 수정 프리셋
- [x] 프리셋 카테고리 UI
- [x] 조명 프리셋
  - [x] 더 따뜻하게
  - [x] 더 차갑게
  - [x] 그림자 강화
  - [x] 그림자 부드럽게
  - [x] 역광 추가
- [x] 색상 프리셋
  - [x] 채도 +15%
  - [x] 채도 -15%
  - [x] 대비 높이기
  - [x] 빈티지 톤
  - [x] 모노크롬
- [x] 요소 프리셋
  - [x] 로고 추가
  - [x] 텍스트 추가
  - [x] 배경 변경
  - [x] 소품 추가
- [x] 스타일 프리셋
  - [x] 더 사실적으로
  - [x] 더 일러스트풍으로
  - [x] 필름 그레인 추가
  - [x] 시네마틱
- [x] 프리셋 클릭 시 수정 요청 자동 입력

### 3.3 Thinking 모드
- [x] Thinking 모드 토글 UI (헤더에 배치)
- [x] 토글 ON/OFF 상태 저장
- [x] Thinking 프리픽스 템플릿
  ```
  Before generating this image:
  1. Analyze the core objective of my request
  2. Verify logical consistency of physics, lighting, and composition
  3. Establish relationships and priorities between elements
  4. Review potential error points (e.g., text spelling, proportions)

  Then generate:
  ```
- [x] 프롬프트 전송 시 프리픽스 자동 추가
- [x] Thinking 모드 설명 툴팁/도움말
- [x] 권장 상황 안내
  - [x] 다중 요소가 있는 복잡한 장면
  - [x] 정확한 텍스트 렌더링
  - [x] 물리적 정확성이 중요한 이미지
  - [x] 여러 이미지의 일관성 유지

### 3.4 편집 세션 저장
- [x] 현재 세션 LocalStorage 저장
- [x] 이전 세션 불러오기
- [x] 세션 삭제 기능

---

## ✅ Phase 4: 고급 기능 (4.4 제외 완료)

### 4.1 추가 템플릿 (6개) ✅
- [x] `composite` - 다중 이미지 합성
  - [x] 종횡비 선택
  - [x] 합성 지시사항
  - [x] 조명 통일 옵션
  - [x] 그림자 방향 옵션
  - [x] 배경 설정
- [x] `magazine` - 매거진 커버
  - [x] 매거진 제목
  - [x] 인물 설명
  - [x] 폰트 스타일
  - [x] 발행 정보
  - [x] 추가 요소 (바코드, 호수, 가격)
- [x] `quilling` - 페이퍼 퀼링
  - [x] 표현할 텍스트
  - [x] 종이 띠 색상
  - [x] 배경색
  - [x] 글씨 스타일
  - [x] 입체감 수준
- [x] `material` - 재료/텍스처
  - [x] 대상 오브젝트
  - [x] 재료
  - [x] 텍스처 디테일
  - [x] 조명
  - [x] 배경
- [x] `cityLettering` - 도시 레터링
  - [x] 도시
  - [x] 표현할 단어
  - [x] 건물 색상
  - [x] 시간대
  - [x] 시점
- [x] `lightingPro` - 조명 정밀 제어
  - [x] 피사체/장면
  - [x] 색온도
  - [x] 키 라이트
  - [x] 필 라이트
  - [x] 림/백 라이트
  - [x] 배치 표면

### 4.2 사용자 정의 템플릿 ✅
- [x] 새 템플릿 생성 UI
  - [x] 템플릿 이름 입력
  - [x] 아이콘 선택
  - [x] 카테고리 선택
  - [x] 설명 입력
- [x] 필드 관리
  - [x] 필드 추가 버튼
  - [x] 필드 타입 선택
  - [x] 필드 라벨/ID 입력
  - [x] placeholder 입력
  - [x] 도움말 입력
  - [x] 필수 여부 체크
  - [x] select 옵션 추가/삭제
  - [x] 필드 순서 변경 (위/아래 버튼)
  - [x] 필드 삭제
- [x] 프롬프트 템플릿 편집
  - [x] 템플릿 문자열 입력
  - [x] {필드ID} 자리표시자 삽입 버튼
  - [x] 미리보기
- [x] 기존 템플릿 복제 후 수정
- [x] 템플릿 저장 (LocalStorage)
- [x] 템플릿 삭제
- [x] 템플릿 내보내기 (JSON)
- [x] 템플릿 가져오기 (JSON)

### 4.3 빈 캔버스 생성기 ✅
- [x] 캔버스 생성 UI (모달)
- [x] 종횡비 프리셋 (10가지)
  - [x] 1:1 정사각형 (1024×1024)
  - [x] 3:4 세로 (768×1024)
  - [x] 4:3 가로 (1024×768)
  - [x] 9:16 세로 풀 (576×1024)
  - [x] 16:9 와이드 (1024×576)
  - [x] 21:9 초와이드 (1024×439)
  - [x] 2:3 포트레이트
  - [x] 3:2 랜드스케이프
  - [x] 4:5 인스타그램
  - [x] 커스텀 (직접 입력)
- [x] 기준 크기 입력 (긴 쪽 기준)
- [x] 배경색 선택
  - [x] 흰색 (#FFFFFF)
  - [x] 투명
  - [x] 커스텀 (색상 선택기)
- [x] Canvas API로 이미지 생성
- [x] 생성된 캔버스 자동 첨부
- [x] 미리보기 표시

### 4.4 캔버스 마킹 에디터 ⏸️ (Phase 5로 이연)
- [ ] 마킹 에디터 모달
- [ ] 도구 모음
  - [ ] 영역 추가 (사각형)
  - [ ] 라벨 지정
  - [ ] 편집
  - [ ] 삭제
  - [ ] 되돌리기
- [ ] 캔버스 영역
  - [ ] 이미지/캔버스 표시
  - [ ] 확대/축소/맞춤
  - [ ] 마우스 드래그로 영역 지정
  - [ ] 영역 리사이즈 핸들
  - [ ] 영역 이동
- [ ] 마킹 목록 패널
  - [ ] 영역별 라벨 (A, B, C...)
  - [ ] 영역 설명 입력
  - [ ] 위치 정보 (퍼센트)
  - [ ] 편집/삭제 버튼
- [ ] 마킹 데이터 구조
  - [ ] canvasWidth, canvasHeight
  - [ ] aspectRatio
  - [ ] regions 배열
    - [ ] id, label, description
    - [ ] x, y, width, height (퍼센트)
    - [ ] color
- [ ] 프롬프트 자동 생성
  - [ ] 마킹 정보를 텍스트로 변환
  - [ ] "이미지 A를 좌측 상단(10%, 10%)에 20% 크기로 배치" 형식
- [ ] "프롬프트에 추가" 버튼
- [ ] "마킹 이미지 저장" 버튼 (PNG)

### 4.5 프롬프트 히스토리 ✅
- [x] 프롬프트 히스토리 저장 (LocalStorage)
- [x] 히스토리 목록 UI
- [x] 프롬프트 클릭 시 복원
- [x] 히스토리 삭제 기능
- [x] 히스토리 검색
- [x] 전체 삭제 기능
- [x] 상대 시간 표시

---

## ✅ Phase 5: 폴리싱 (완료)

### 5.1 반응형 완성 ✅
- [x] 데스크톱 레이아웃 (≥1200px)
  - [x] 3열 레이아웃 (첨부 | 빌더 | 결과)
- [x] 태블릿 레이아웃 (768px-1199px)
  - [x] 2열 레이아웃 (첨부+빌더 | 결과)
- [x] 모바일 레이아웃 (≤767px)
  - [x] 1열 레이아웃
  - [x] 하단 탭 네비게이션 (첨부 | 빌더 | 결과)
  - [x] 스와이프 제스처 지원

### 5.2 키보드 단축키 ✅
- [x] 단축키 목록
  - [x] `Ctrl/Cmd + Enter` - 이미지 생성
  - [x] `Ctrl/Cmd + C` - 프롬프트 복사
  - [x] `Ctrl/Cmd + R` - 폼 초기화
  - [x] `Ctrl/Cmd + S` - API 키 저장
  - [x] `Ctrl/Cmd + 1~6` - 템플릿 전환
  - [x] `ESC` - 모달 닫기
  - [x] `Shift + ?` - 도움말 표시
- [x] 단축키 안내 UI

### 5.3 도움말 시스템 ✅
- [x] 도움말 모달
- [x] 기능별 설명 (탭: 개요 / 템플릿 / 단축키 / 팁 / FAQ)
- [x] 사용 방법 가이드
- [x] 단축키 목록 (동적 생성)
- [x] FAQ

### 5.4 팁 표시 시스템 ✅
- [x] 팁 데이터 구조
- [x] 상황별 팁 표시
  - [x] 복잡한 장면 → Thinking 모드 권장
  - [x] 텍스트 렌더링 → 25자 이하 권장
  - [x] 제품 사진 → 흰 배경 권장
  - [x] 이미지 미첨부 → 참조 이미지 권장
  - [x] 첫 생성 → 작업 모드 설명
- [x] 팁 닫기/다시 보지 않기
- [x] 시작 시 팁 표시 옵션

### 5.5 온보딩 가이드 ✅
- [x] 첫 방문 감지
- [x] 단계별 온보딩 투어 (6단계)
  - [x] 환영 메시지
  - [x] API 키 설정 안내
  - [x] 템플릿 선택 안내
  - [x] 필드 입력 안내
  - [x] 이미지 생성 안내
  - [x] 완료 메시지
- [x] 온보딩 스킵 옵션
- [x] 온보딩 다시 보기 (resetOnboarding)
- [x] 스포트라이트 효과
- [x] 진행 표시기

### 5.6 성능 최적화 ✅
- [x] 이미지 지연 로딩 (IntersectionObserver)
- [x] 메모리 관리 (LocalStorage 용량 체크)
- [x] 디바운싱 (프롬프트 미리보기 업데이트 300ms)
- [x] 번역 캐싱 (Map 기반, 100개 제한)
- [x] LocalStorage 용량 관리 (5MB 제한)

### 5.7 접근성 ✅
- [x] 키보드 네비게이션 (Tab, Arrow, Enter)
- [x] ARIA 레이블 (role, aria-label, aria-selected)
- [x] 고대비 모드 (@media prefers-contrast: high)
- [x] 스크린 리더 지원 (.sr-only 클래스)
- [x] 포커스 표시 (:focus-visible)
- [x] 줄어든 모션 지원 (@media prefers-reduced-motion)
- [x] 스킵 네비게이션 링크

### 5.8 다크 모드 ✅
- [x] 다크 모드 CSS 변수 ([data-theme="dark"])
- [x] 다크 모드 토글 버튼 (헤더)
- [x] 시스템 설정 감지 (prefers-color-scheme)
- [x] 다크 모드 설정 저장 (LocalStorage)

### 5.9 국제화 (i18n) ✅
- [x] 언어 데이터 구조 (locales/ko.js, locales/en.js)
- [x] 한국어 기본
- [x] 영어 지원
- [x] 언어 전환 UI (헤더 토글 버튼)
- [x] t() 번역 함수
- [x] data-i18n 속성 지원

### 5.10 최종 검증 ✅
- [x] 빌드 성공 (245.5 KB)
- [x] 32개 JS 모듈 통합
- [x] 9개 CSS 파일 통합
- [x] 전체 기능 구현 완료
  - [x] API 키 관리
  - [x] 12개 템플릿
  - [x] 프롬프트 빌더
  - [x] 이미지 생성
  - [x] 이미지 업로드/첨부
  - [x] 이미지 드래그 순서 변경
  - [x] 작업 모드
  - [x] 번역
  - [x] 대화식 편집
  - [x] Thinking 모드
  - [x] 사용자 정의 템플릿
  - [x] 빈 캔버스 생성
  - [x] 프롬프트 히스토리
  - [x] 결과 히스토리 저장
  - [ ] 마킹 에디터 (4.4 - 제외됨)

---

## 📁 파일 구조

```
nano-banana-assistant/
├── nano-banana-assistant.html    # 메인 애플리케이션 (단일 파일)
├── nano-banana-assistant-prd.md  # PRD 문서
└── IMPLEMENTATION_CHECKLIST.md   # 이 문서
```

---

## 📝 변경 이력

| 날짜 | 버전 | 변경 내용 |
|------|------|----------|
| 2025-12-23 | 1.0.0 | Phase 1 MVP 완료 (6개 템플릿, 기본 기능) |
| 2025-12-23 | 2.0.0 | Phase 2 완료 (이미지 관리, 번역, 3열 레이아웃) |
| 2025-12-23 | 3.0.0 | Phase 3 완료 (대화식 편집, Thinking 모드, 빠른 수정 프리셋) |
| 2025-12-23 | 4.0.0 | Phase 4 완료 (추가 템플릿 6개, 사용자 정의 템플릿, 빈 캔버스 생성기, 프롬프트 히스토리) - 4.4 마킹 에디터는 제외 |
| 2025-12-23 | 5.0.0 | Phase 5 완료 (다크 모드, 반응형, 접근성, 키보드 단축키, 도움말, 팁, 온보딩, i18n, 이미지 드래그, 히스토리 저장) |

---

## 🔗 참고 링크

- [Gemini API 문서](https://ai.google.dev/docs)
- [API 키 발급](https://aistudio.google.com/app/apikey)
